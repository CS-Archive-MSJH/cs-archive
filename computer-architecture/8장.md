# 8-1 장치 컨트롤러와 장치 드라이버

### 들어가며
- 입출력장치는 어떻게 컴퓨터 내부와 데이터를 주고 받는걸까?
- 입출력장치는 보조기억장치도 포함

## CPU - 입출력장치 정보 주고 받기
- 입출력장체는 앞서 CPU, 메모리보다 다루기가 더 까다로움
1. 입출력장치에는 종류가 너무나도 많다.
    - 장치가 다양하면 장치마다 속도, 데이터 전송 형식 등도 다양함.
    - 다양한 입출력장치와 정보를 주고받는 방식을 규격화하기 힘듦.

2. 일반적으로 CPU와 메모리의 데이터 전송률은 높지만 입출력장치의 데이터 전송률은 낮음
    - 전송률: 데이터를 얼마나 빨리 교환할 수 있는지를 나타내는 지표

## 장치 컨트롤러

- 이런 이유로 입출력장치는 장치 컨트롤러를 통해 컴퓨터와 연결
- 입출력장치는 장치 컨트롤러를 통해 컴퓨터 내부와 정보를 주고 받음

## 장치 컨트롤러의 역할

- CPU와 입출력장치 간의 통시중개
    - 다양한 입출력장치들로부터 오는 정보를 규격화하기 어렵다는 문제 해결 가능
- 오류 검출
- 데이터 버퍼링
    - 버퍼링: 전송률이 높은 장치와 낮은 장치 사이에 주고 받는 데이터를 버퍼라는 임시 저장 공간에 저장하여 전송률을 비슷하게 맞추는 방법

    <img src="assets/8-1-1.jpg" alt="alt text" width="500"/>

## 장치 컨트롤러의 구조

<img src="assets/8-1-2.jpg" alt="alt text" width="500"/>

- 장치 컨트롤러는 버스에 연결돼서 정보를 주고 받음
- 정보의 종류는 3가지이며, 각각의 다른 레지스터에 저장
- 상태 레지스터와 제어 레지스터는 하나의 레지스터(상태/제어 레지스터)로 사용되기도

### 데이터 레지스터
- CPU와 입출력장치 사이에 주고받을 데이터가 담기는 레지스터(버퍼)
- RAM을 사용하기도

### 상태 레지스터
- 상태 정보 저장
    - 입출력장치가 입출력 작업을 할 준비가 되었는지,
    - 입출력 작업이 완료되었는지,
    - 입출력장치에 오류는 없는지 등의 상태 정보

### 제어 레지스터
- 입출력장치가 수행할 내용에 대한 제어 정보

## 장치 드라이버
- 장치 컨트롤러의 동작을 감지하고 제어하는 프로그램
- 장치 컨트롤러가 입출력장치를 연결하기 위한 하드웨어적인 통로라면,
- 장치 컨트롤러가 입출력장치를 연결하기 위한 소프트웨어적인 통로
- 장치 드라이버가 설치되어 있지 않다면 해당 입출력장치 사용 불가
- 컴퓨터(운영체제)가 연결된 장치의 드라이버를 인식하고 실행할 수 있다면 컴퓨터 내부와 정보를 주고받을 수 있음
- 컴퓨터(운영체제)가 장치 드라이버를 인식하거나 실행할 수 없다면 그 장치는 컴퓨터 내부와 정보를 주고받을 수 없음

# 8-2 다양한 입출력 방법

### 들어가며
- 세 가지 입출력 방식: 프로그램 입출력, 이터럽트 기반 입출력, DMA 입출력

## 프로그램 입출력
- 프로그램 속 명령어로 입출력장치를 제어하는 방법, 입출력 명령어로써 장치 컨트롤러와 상호작용
- 메모리에 저장된 정보를 하드 디스크에 백업(=하드 디스크에 새로운 정보 쓰기)
    1. CPU는 하드 디스크 컨트롤러의 제어 레지스터에 쓰기 명령 내보내기
    2. 하드 디스크 컨트롤러는 하드 디스크 상태 확인 -> 상태 레지스터에 준비 완료 표시
    3. CPU는 상태 레지스터를 주기적으로 읽어보면 하드 디스크의 준비 여부를 확인
    4. 하드 디스크가 준비되었다면 백업할 메모리의 정보를 데이터 레지스터에 쓰기

- 프로그램 입출력 방식: CPU가 장치 컨트롤러의 레지스터 값을 읽고 씀으로써 이루어짐
